<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Macro Calculator</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  padding: 20px;
}
.container {
  max-width: 600px;
  margin: auto;
  background: white;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}
h1 { 
  text-align: center;
  color: #333;
  margin-bottom: 30px;
}
.section { 
  margin-bottom: 20px;
}
label {
  display: block;
  margin-bottom: 6px;
  font-weight: bold;
  color: #555;
}
input, select {
  width: 100%;
  padding: 10px;
  margin-bottom: 10px;
  border: 1px solid #ddd;
  border-radius: 5px;
  box-sizing: border-box;
  font-size: 14px;
}
input:focus, select:focus {
  outline: none;
  border-color: #007bff;
}
.unit-toggle {
  display: flex;
  gap: 10px;
  margin-bottom: 10px;
}
.unit-btn {
  flex: 1;
  padding: 10px;
  border: 1px solid #ccc;
  background: #eee;
  cursor: pointer;
  border-radius: 5px;
  transition: all 0.3s;
  font-size: 14px;
}
.unit-btn:hover {
  background: #ddd;
}
.unit-btn.active {
  background: #007bff;
  color: white;
  border-color: #007bff;
}
.height-inputs {
  display: flex;
  gap: 10px;
}
.height-inputs input {
  flex: 1;
}
.hidden {
  display: none;
}
button.calculate {
  width: 100%;
  padding: 15px;
  background: #28a745;
  color: white;
  border: none;
  font-size: 16px;
  border-radius: 5px;
  cursor: pointer;
  font-weight: bold;
  transition: background 0.3s;
}
button.calculate:hover {
  background: #218838;
}
.results {
  margin-top: 20px;
  padding: 20px;
  background: #f8f9fa;
  border-radius: 8px;
  border: 2px solid #28a745;
}
.results.hidden {
  display: none;
}
.results h2 {
  margin-top: 0;
  color: #28a745;
  font-size: 20px;
}
.result-item {
  display: flex;
  justify-content: space-between;
  padding: 10px 0;
  border-bottom: 1px solid #ddd;
}
.result-item:last-child {
  border-bottom: none;
}
.result-label {
  font-weight: bold;
  color: #555;
}
.result-value {
  color: #007bff;
  font-weight: bold;
}
.macro-breakdown {
  margin-top: 15px;
  padding-top: 15px;
  border-top: 2px solid #ddd;
}
.macro-item {
  display: flex;
  justify-content: space-between;
  padding: 8px 0;
  align-items: center;
}
.macro-label {
  font-weight: 600;
  color: #333;
}
.macro-grams {
  color: #007bff;
  font-weight: bold;
  font-size: 18px;
}
.macro-calories {
  color: #666;
  font-size: 14px;
  margin-left: 10px;
}
.error {
  color: #dc3545;
  font-size: 14px;
  margin-top: 5px;
  display: none;
}
.error.show {
  display: block;
}
</style>
</head>
<body>
<div class="container">
<h1>ðŸ¥— Macro Calculator</h1>

<div class="section">
<label>Age</label>
<input type="number" id="age" min="1" max="120" placeholder="Enter your age">
<div class="error" id="age-error">Please enter a valid age</div>
</div>

<div class="section">
<label>Sex</label>
<select id="sex">
  <option value="male">Male</option>
  <option value="female">Female</option>
</select>
</div>

<div class="section">
<label>Weight</label>
<div class="unit-toggle">
  <button class="unit-btn active" data-unit="weight" data-value="lbs">lbs</button>
  <button class="unit-btn" data-unit="weight" data-value="kg">kg</button>
</div>
<input type="number" id="weight" step="0.1" placeholder="Enter your weight">
<div class="error" id="weight-error">Please enter a valid weight</div>
</div>

<div class="section">
<label>Height</label>
<div class="unit-toggle">
  <button class="unit-btn active" data-unit="height" data-value="ft">ft/in</button>
  <button class="unit-btn" data-unit="height" data-value="cm">cm</button>
</div>
<div id="height-ft" class="height-inputs">
  <input type="number" id="height-feet" min="0" max="8" placeholder="Feet">
  <input type="number" id="height-inches" min="0" max="11" placeholder="Inches">
</div>
<div id="height-cm" class="hidden">
  <input type="number" id="height-centimeters" step="0.1" placeholder="Centimeters">
</div>
<div class="error" id="height-error">Please enter a valid height</div>
</div>

<div class="section">
<label>Activity Level</label>
<select id="activity">
  <option value="1.2">Sedentary (little or no exercise)</option>
  <option value="1.375">Lightly active (exercise 1-3 days/week)</option>
  <option value="1.55">Moderately active (exercise 3-5 days/week)</option>
  <option value="1.725">Very active (exercise 6-7 days/week)</option>
  <option value="1.9">Extremely active (physical job or training twice/day)</option>
</select>
</div>

<div class="section">
<label>Goal</label>
<select id="goal">
  <option value="lose">Weight Loss (500 cal deficit)</option>
  <option value="maintain">Maintain Weight</option>
  <option value="gain">Muscle Gain (500 cal surplus)</option>
</select>
</div>

<button class="calculate" onclick="calculateMacros()">Calculate Macros</button>

<div class="results hidden" id="results">
<h2>Your Results</h2>
<div class="result-item">
  <span class="result-label">BMR (Base Metabolic Rate):</span>
  <span class="result-value" id="bmr">-</span>
</div>
<div class="result-item">
  <span class="result-label">TDEE (Maintenance Calories):</span>
  <span class="result-value" id="tdee">-</span>
</div>
<div class="result-item">
  <span class="result-label">Target Calories:</span>
  <span class="result-value" id="target-calories">-</span>
</div>

<div class="macro-breakdown">
  <h3 style="margin-top: 0; color: #333;">Daily Macro Targets</h3>
  <div class="macro-item">
    <span class="macro-label">Protein:</span>
    <div>
      <span class="macro-grams" id="protein-grams">-</span>
      <span class="macro-calories" id="protein-cals">(-)</span>
    </div>
  </div>
  <div class="macro-item">
    <span class="macro-label">Carbs:</span>
    <div>
      <span class="macro-grams" id="carbs-grams">-</span>
      <span class="macro-calories" id="carbs-cals">(-)</span>
    </div>
  </div>
  <div class="macro-item">
    <span class="macro-label">Fat:</span>
    <div>
      <span class="macro-grams" id="fat-grams">-</span>
      <span class="macro-calories" id="fat-cals">(-)</span>
    </div>
  </div>
</div>
</div>
</div>

<script>
// Unit toggle functionality
document.querySelectorAll('.unit-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    const unit = this.dataset.unit;
    const value = this.dataset.value;
    
    // Toggle active state
    document.querySelectorAll(`[data-unit="${unit}"]`).forEach(b => {
      b.classList.remove('active');
    });
    this.classList.add('active');
    
    // Show/hide appropriate height inputs
    if (unit === 'height') {
      if (value === 'ft') {
        document.getElementById('height-ft').classList.remove('hidden');
        document.getElementById('height-cm').classList.add('hidden');
      } else {
        document.getElementById('height-ft').classList.add('hidden');
        document.getElementById('height-cm').classList.remove('hidden');
      }
    }
  });
});

function validateInputs() {
  let isValid = true;
  
  // Clear previous errors
  document.querySelectorAll('.error').forEach(err => err.classList.remove('show'));
  
  // Validate age
  const age = parseFloat(document.getElementById('age').value);
  if (!age || age < 1 || age > 120) {
    document.getElementById('age-error').classList.add('show');
    isValid = false;
  }
  
  // Validate weight
  const weight = parseFloat(document.getElementById('weight').value);
  if (!weight || weight <= 0) {
    document.getElementById('weight-error').classList.add('show');
    isValid = false;
  }
  
  // Validate height
  const heightUnit = document.querySelector('[data-unit="height"].active').dataset.value;
  if (heightUnit === 'ft') {
    const feet = parseFloat(document.getElementById('height-feet').value);
    const inches = parseFloat(document.getElementById('height-inches').value);
    if (!feet || feet < 0 || (inches && inches < 0)) {
      document.getElementById('height-error').classList.add('show');
      isValid = false;
    }
  } else {
    const cm = parseFloat(document.getElementById('height-centimeters').value);
    if (!cm || cm <= 0) {
      document.getElementById('height-error').classList.add('show');
      isValid = false;
    }
  }
  
  return isValid;
}

function calculateMacros() {
  if (!validateInputs()) {
    return;
  }
  
  // Get inputs
  const age = parseFloat(document.getElementById('age').value);
  const sex = document.getElementById('sex').value;
  const activity = parseFloat(document.getElementById('activity').value);
  const goal = document.getElementById('goal').value;
  
  // Get weight in kg
  const weightUnit = document.querySelector('[data-unit="weight"].active').dataset.value;
  let weightKg;
  if (weightUnit === 'lbs') {
    weightKg = parseFloat(document.getElementById('weight').value) * 0.453592;
  } else {
    weightKg = parseFloat(document.getElementById('weight').value);
  }
  
  // Get height in cm
  const heightUnit = document.querySelector('[data-unit="height"].active').dataset.value;
  let heightCm;
  if (heightUnit === 'ft') {
    const feet = parseFloat(document.getElementById('height-feet').value) || 0;
    const inches = parseFloat(document.getElementById('height-inches').value) || 0;
    heightCm = (feet * 12 + inches) * 2.54;
  } else {
    heightCm = parseFloat(document.getElementById('height-centimeters').value);
  }
  
  // Calculate BMR using Mifflin-St Jeor Equation
  let bmr;
  if (sex === 'male') {
    bmr = 10 * weightKg + 6.25 * heightCm - 5 * age + 5;
  } else {
    bmr = 10 * weightKg + 6.25 * heightCm - 5 * age - 161;
  }
  
  // Calculate TDEE
  const tdee = bmr * activity;
  
  // Calculate target calories based on goal
  let targetCalories;
  switch(goal) {
    case 'lose':
      targetCalories = tdee - 500;
      break;
    case 'gain':
      targetCalories = tdee + 500;
      break;
    default:
      targetCalories = tdee;
  }
  
  // Calculate macros
  // Protein: 1g per lb of body weight (or 2.2g per kg)
  const proteinGrams = Math.round(weightKg * 2.2);
  const proteinCals = proteinGrams * 4;
  
  // Fat: 25% of total calories
  const fatCals = Math.round(targetCalories * 0.25);
  const fatGrams = Math.round(fatCals / 9);
  
  // Carbs: remaining calories
  const carbsCals = targetCalories - proteinCals - fatCals;
  const carbsGrams = Math.round(carbsCals / 4);
  
  // Display results
  document.getElementById('bmr').textContent = Math.round(bmr) + ' cal/day';
  document.getElementById('tdee').textContent = Math.round(tdee) + ' cal/day';
  document.getElementById('target-calories').textContent = Math.round(targetCalories) + ' cal/day';
  
  document.getElementById('protein-grams').textContent = proteinGrams + 'g';
  document.getElementById('protein-cals').textContent = `(${proteinCals} cal)`;
  
  document.getElementById('carbs-grams').textContent = carbsGrams + 'g';
  document.getElementById('carbs-cals').textContent = `(${Math.round(carbsCals)} cal)`;
  
  document.getElementById('fat-grams').textContent = fatGrams + 'g';
  document.getElementById('fat-cals').textContent = `(${fatCals} cal)`;
  
  // Show results
  document.getElementById('results').classList.remove('hidden');
  
  // Scroll to results
  document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}
</script>
</body>
</html>
